<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="{{url_for('static', filename='d3.v3.min.js')}}"></script>
    <script src="{{url_for('static', filename='vtree.js')}}"></script>
    <script type="text/javascript">
    var vt;

    window.onload = function () {
      var container = document.getElementById("container");
      var msg = document.getElementById("msg");
      vt = new VTree(container);
      var reader = new VTree.reader.Object();

      function updateTree() {
        var s = document.getElementById("from-text").value;

        msg.innerHTML = '';

        try {
          var jsonData = JSON.parse(s);
        } catch (e) {
          msg.innerHTML = 'JSON parse error: ' + e.message;
        }

        var data = reader.read(jsonData);

        vt.data(data)
          .update();
      }

      function createSvgString() {
        document.getElementById("svg-text").value = vt.createSvgString();
      }

      document.getElementById("go-button").onclick = updateTree;
      document.getElementById("svg-button").onclick = createSvgString;

      updateTree();
      document.getElementsByClassName("vtree")[0].style = "height: 70%; width: 100%"

    };

    </script>
</head>
<body>
     <div class="container">


    <div class="mb-3" style=" display: none">
      <label for="from-text" class="form-label">JSON</label>
      <textarea id="from-text" class="form-control" rows="6">{{ json_tree }}</textarea>
    </div>

    <div class="mb-3" style="display: none">
      <button id="go-button" type="button" class="btn btn-primary">Visualize</button>
    </div>

    <div id="msg" class="text-danger mb-3"></div>

    <div id="container" class="mb-3" style="width: 100%"></div>
         <h1>{{ avg_sqr_err }}</h1>

    <div class="mb-3">
      <button id="svg-button" type="button" class="btn btn-primary">Update</button>
    </div>

  </div>
</body>
</html>